<div class="dashboard-container">
    <!-- Welcome Section -->
    <div class="welcome-section">
        <h1>Welcome back, {{ username }}!</h1>
        <p>Here's an overview of your resume analysis progress.</p>
    </div>

    <!-- Metrics Grid -->
    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-icon">
                <mat-icon>description</mat-icon>
            </div>
            <div class="metric-info">
                <h3>Total Resumes</h3>
                <p class="metric-value">{{ totalResumes }}</p>
            </div>
        </div>
        <div class="metric-card">
            <div class="metric-icon">
                <mat-icon>analytics</mat-icon>
            </div>
            <div class="metric-info">
                <h3>Average Score</h3>
                <p class="metric-value">{{ averageScore }}%</p>
            </div>
        </div>
    </div>

    <!-- Features Grid -->
    <div class="features-grid">
        <!-- Resume Analysis (Existing) -->
        <div class="feature-card">
            <div class="feature-header">
                <mat-icon>upload_file</mat-icon>
                <h3>Resume Analysis</h3>
            </div>
            <p>Upload your resume to get instant feedback and job fit scoring.</p>
            <div class="upload-wrapper">
                <app-upload (uploadComplete)="onUploadComplete()"></app-upload>
            </div>
        </div>

        <!-- Cover Letter Generator (Coming Soon) -->
        <div class="feature-card coming-soon">
            <div class="badge">Coming Soon</div>
            <div class="feature-header">
                <mat-icon>edit_note</mat-icon>
                <h3>Cover Letter Generator</h3>
            </div>
            <p>Generate tailored cover letters based on your resume and job description.</p>
            <button mat-button disabled>Not Available Yet</button>
        </div>
    </div>

    <!-- Recent Analysis List -->
    <div class="resumes-list">
        <h2>Recent Analysis</h2>
        <div class="resume-grid">
            <mat-card *ngFor="let resume of resumes" class="resume-card">
                <mat-card-header>
                    <mat-card-title>{{ resume.fileName }}</mat-card-title>
                    <mat-card-subtitle>{{ resume.createdAt | date:'medium' }}</mat-card-subtitle>
                </mat-card-header>
                <mat-card-actions>
                    <button mat-button color="primary" (click)="toggleExpand(resume.id)">
                        {{ expandedResumeId === resume.id ? 'Hide Analysis' : 'View Analysis' }}
                    </button>
                </mat-card-actions>
                <mat-card-content *ngIf="expandedResumeId === resume.id">
                    <markdown [data]="resume.analysisResult"></markdown>
                </mat-card-content>
            </mat-card>

            <div *ngIf="resumes.length === 0" class="no-resumes">
                <p>No resumes analyzed yet. Upload one above to get started!</p>
            </div>
        </div>
    </div>
</div>